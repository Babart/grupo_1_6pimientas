<!DOCTYPE html>
<html lang="es">
<%- include('./partials/head') %> 
<body>
    <%- include('./partials/header');%> 
    <main>
        <div class="cajaLogin">
            <form  action="/users/edit/<%= locals.userToEdit && userToEdit.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
                <h3>
                    Editar un Usuario:
                </h3>
                <p>
                    <div class="imgUserContainer">
                        <img class="imgUser" src="/images/users/<%= userToEdit.image %>" alt="imagen de usuario">
                    </div>
                    <div>
                        <p>
                            <br>
                            <h4>Cambiar imagen</h4>
                            <input class="ingresoCreate fileCreate" type="file" name="image"></input>
                        </p>
                    </div>
                    <label class="titleRegister">Nombre y Apellido</label>
                    <input class="ingreso" type="text" name="fullName" placeholder="Nombre y Apellido" value="<%= locals.userToEdit && userToEdit.fullName %>">
                    <% if (locals.errors && errors.fullName) {%> 
                        <label class="feedBack"><%= errors.fullName.msg %> </label><br>
                    <% } %> 
                    <label class="titleRegister">E-mail</label>
                    <input class="ingreso" type="email" name="email"  placeholder="E-mail" value="<%= locals.userToEdit && userToEdit.email %>">
                    <% if (locals.errors && errors.email) {%> 
                        <label class="feedBack"><%= errors.email.msg %> </label><br>
                    <% } %> 

                    <label class="titleRegister">Confirmar E-mail</label>
                    <input class="ingreso" type="email" name="confirmEmail"  placeholder="Confirmar E-mail" value="<%= locals.userToEdit && userToEdit.email %>">
                    <% if (locals.errors && errors.confirmEmail) {%> 
                        <label class="feedBack"><%= errors.confirmEmail.msg %> </label><br>
                    <% } %> 

                    <label class="titleRegister">Contraseña</label>
                    <input class="ingreso" type="password" name="password"  placeholder="Contraseña" >
                    <% if (locals.errors && errors.password) {%> 
                        <label class="feedBack"><%= errors.password.msg %> </label><br>
                    <% } %> 
                    
                    <label class="titleRegister">Confirmar Contraseña</label>
                    <input class="ingreso" type="password" name="confirmPassword"  placeholder="Confirmar Contraseña" >
                    <% if (locals.errors && errors.confirmPassword) {%> 
                        <label class="feedBack"><%= errors.confirmPassword.msg %> </label><br>
                    <% } %> 

                    <label class="titleRegister">Calle</label>
                    <input class="ingreso" type="text" name="street"  placeholder="Calle" value="<%= locals.userToEdit && userToEdit.street %>">
                    <% if (locals.errors && errors.street) {%> 
                        <label class="feedBack"><%= errors.street.msg %> </label><br>
                    <% } %> 

                    <label class="titleRegister">Numero</label>
                    <input class="ingreso" type="number" name="number"  placeholder="Número" value="<%= locals.userToEdit && userToEdit.number %>">
                    <% if (locals.errors && errors.number) {%> 
                        <label class="feedBack"><%= errors.number.msg %> </label><br>
                    <% } %> 
                    
                    <label class="titleRegister">Piso</label>
                    <input class="ingreso" type="number" name="floor"  placeholder="Piso" value="<%= locals.userToEdit && userToEdit.floor %>">
                    <% if (locals.errors && errors.floor) {%> 
                        <label class="feedBack"><%= errors.floor.msg %> </label><br>
                    <% } %> 

                    <label class="titleRegister">Departamento</label>
                    <input class="ingreso" type="text" name="department"  placeholder="Departamento" value="<%= locals.userToEdit && userToEdit.department %>">
                    <% if (locals.errors && errors.department) {%> 
                        <label class="feedBack"><%= errors.department.msg %> </label><br>
                    <% } %> 

                    <label class="titleRegister">Localidad</label>
                    <input class="ingreso" type="text" name="city"  placeholder="Localidad" value="<%= locals.userToEdit && userToEdit.city %>">
                    <% if (locals.errors && errors.city) {%> 
                        <label class="feedBack"><%= errors.city.msg %> </label><br>
                    <% } %>
                    <label class="titleRegister">Categoría</label>
                    <div class="category_container">
                        <% if (locals.user && user.category == 'admin') { %> 
                            <div>
                                <input class="edit_category" type="radio" name="category" id="admin" value="admin" checked <%= userToEdit.category == 'admin' ? 'checked' : ' ' %>>
                                <label class="edit_category" for="admin">admin</label>

                            </div>
                            <div>
                                <input class="edit_category" type="radio" name="category" id="user" value="user" <%= userToEdit.category == 'user' ?  'checked' : ' ' %>>
                                <label class="edit_category" for="user">user</label>

                            </div>
                        <% } %>
                        
                    </div>
                    <br>
                            
                    <p class="botonsRegister">
                        <button type="submit" class="ingreso" id="botonIngreso">Enviar</button> 
                       
                    </p>
                </p>
            </form>
            <form class='deleteUser' action="/users/delete/<%= userToEdit.id %>?_method=DELETE" method="POST">
                
                    <button type="submit" class="editUserAll" id="butonEditUserDelete">Eliminar usuario</button>
                
            </form>
        </div>
    </main>

    <%- include('./partials/footer') %> 
</body>
</html>